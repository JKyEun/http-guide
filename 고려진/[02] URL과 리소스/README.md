# 2장. URL과 리소스
- [URL 문법](#url-문법)
- [URL 구성요소](#url-구성요소)
- [단축 URL](#단축-url)
- [URL 확장](#url-확장)
- [안전한 전송](#안전한-전송)
- [미래의 URL: URN](#미래의-url-urn)

---

### URL 문법

대부분의 URL은 다음과 같은 표준 포맷을 따른다:

```
<스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

**예시:**
```
http://www.example.com:80/path/to/myfile.html?key1=value1&key2=value2#section
```

### URL 구성요소

**스킴 (Scheme)**
리소스에 접근하기 위해 사용되는 프로토콜을 나타낸다.
- 예: `http`, `https`, `ftp`, `mailto`
- 대소문자를 가리지 않는다

**호스트와 포트**
- **호스트**: 리소스를 호스팅하는 장비의 인터넷 주소
- **포트**: 서버가 열어놓은 네트워크 포트 (HTTP 기본값: 80)

**사용자 이름과 비밀번호**
일부 스킴은 리소스에 접근하기 위해 사용자 이름과 비밀번호를 요구한다.
- 예: `ftp://user:password@ftp.example.com/file.txt`

**경로 (Path)**
서버 내의 리소스 위치를 나타낸다.
- 슬래시(/)로 구분된 경로 조각으로 이루어진다
- 예: `/products/electronics/laptop.html`

**파라미터 (Parameters)**
특정 스킴에서 입력 파라미터를 기술하는 용도로 사용한다.
- 세미콜론(;)으로 구분한다
- 예: `http://www.example.com/file;type=d`

**질의 문자열 (Query String)**
게이트웨이를 가리키는 URL의 경로 컴포넌트와 함께 전달된다.
- 물음표(?)로 시작한다
- `&`로 파라미터를 구분한다
- 예: `?item=12345&color=blue`

**프래그먼트 (Fragment)**
리소스의 특정 부분을 가리킨다.
- 샵(#)으로 시작한다
- 클라이언트에서만 사용되며 서버로 전송되지 않는다
- 예: `#section3`

### 단축 URL

**상대 URL**
리소스 안에 있는 리소스를 간결하게 기술하는 방법이다. 베이스 URL을 기준으로 해석된다.

**베이스 URL 찾기**
1. 리소스에 명시적으로 제공된 베이스 URL (`<base>` 태그)
2. 리소스를 포함하고 있는 베이스 URL
3. 베이스 URL이 없는 경우: 절대 URL만 사용 가능

**상대 URL 해석 예시**

베이스 URL: `http://www.example.com/docs/page.html`

- `./subdir/file.html` → `http://www.example.com/docs/subdir/file.html`
- `../other.html` → `http://www.example.com/other.html`
- `/root/file.html` → `http://www.example.com/root/file.html`

### URL 확장

브라우저들은 사용자 편의를 위해 URL을 자동으로 확장한다.

**호스트명 확장**
사용자가 "yahoo"만 입력하면 브라우저가 자동으로 "www.yahoo.com"으로 확장할 수 있다.

**히스토리 확장**
사용자가 과거에 방문했던 URL을 기억하고 자동 완성한다.

### 안전한 전송

URL은 안전하게 전송되도록 설계되었다. 즉, 정보가 유실될 위험 없이 URL을 전송할 수 있어야 한다.

**안전한 문자**
- 알파벳 문자: A-Z, a-z
- 숫자: 0-9
- 특수문자: `-`, `_`, `.`, `~`

**인코딩 메커니즘**
안전하지 않은 문자는 퍼센트 기호(%)로 시작해서 ASCII 코드를 16진수로 표현한 이스케이프 문자로 바꾼다.

**예시**
- 공백: `%20`
- `%`: `%25`
- `/`: `%2F`
- `#`: `%23`
- `?`: `%3F`

**문자 제한**
- 예약된 문자: URL 구성요소 구분자로 사용되는 특수 문자 (`;`, `/`, `?`, `:`, `@`, `&`, `=`, `+`, `$`, `,`)
- 사용이 제한된 문자: 혼동을 일으킬 수 있는 문자 (`{`, `}`, `|`, `\`, `^`, `~`, `[`, `]`, `` ` ``)

### 미래의 URL: URN

URN(Uniform Resource Name)은 객체의 위치와 독립적으로 리소스를 가리킨다.

**URN의 장점**
- 리소스가 이동해도 URN은 변하지 않는다
- 여러 프로토콜로 접근 가능하다
- 리소스의 영구적인 식별자 역할을 한다

**예시**
```
urn:isbn:0-486-27557-4
```

URN은 아직 실험 단계이며, 표준화와 인프라 구축이 진행 중이다.
